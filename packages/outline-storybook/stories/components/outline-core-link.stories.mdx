import { html } from 'lit';
import { Meta, Canvas, Story } from '@storybook/addon-docs';

import '@phase2/outline-core-link';
import '@phase2/outline-alert';

import sampleImage from '@phase2/outline-static-assets/media/tech/1440/code-6.jpg';

<Meta
  title="Navigation/Link"
  component="outline-core-link"
  parameters={{
    viewMode: 'docs',
    previewTabs: {
      canvas: {
        hidden: true,
      },
    },
  }}
/>

[![Latest version for outline-core-link](https://img.shields.io/npm/v/@phase2/outline-core-link)](https://www.npmjs.com/package/@phase2/outline-core-link)

# `<outline-core-link>` `OutlineCoreLink`

The `outline-core-link` component allows complete flexibility in how you choose to render a link element across a single or multiple applications.

## Documentation Status

<outline-alert status="warning" size="large">
  <span slot="header">Status: Needs Work/In Progress</span>
  <p>This documentation is in need of additional work, or is currently in progress.</p>
</outline-alert>

## Introduction to the **`outline-core-link`** component

The `outline-core-link` component allows for two distinct types of usages. 
We will call these usages **Consumer Links** and **Component Links**. The former is the consumer application providing the `a`, and the latter is the web component itself generating the `a`.

**The default reccomendation** is to use the **Consumer Links** option as it is the most flexible, allows for the most control over the link element.
Additionally, the **Consumer Links** method avoids any issues with tools that are still unable to penetrate the Shadow DOM, and are only able to accurately scan and/or operate on the Light DOM.

As links are a foundational component, utilized across the board in a variety of component and consumer usages, it is imporant the `outline-core-link` component is as flexible as possible allowing for a variety of consumer needs up front to ensure that our core components are ready for whatever may be thrown their way.


### Consumer Links

Consumer Links are links that are created by a consumer application that uses the `outline-core-link` component as a wrapper for links generated by another backend/frontend system using the component.

> *If you would like to render your link via properties, you should use the **Component Link** method described below.*

---

<p><outline-core-link><a href="https://www.phase2technology.com" className="sb-unstyled" target="_blank">Consumer Link</a></outline-core-link></p>

```html preview-story
<outline-core-link>
  <a href="https://www.phase2technology.com" target="_blank">
    Consumer Link
  </a>
</outline-core-link>
```

The above example simply shows how a consumer application can pass in a valid `a` tag via the default slot, and the `outline-core-link` component will ensure proper markup and styling.

#### **Breaking a Consumer Link**

**Consumer Links** that are attempting to wrap the `a` tag provided to the `slot` will see an error in the console, and likely see broken styling. 

---

<p><outline-core-link><span><a href="https://www.phase2technology.com" className="sb-unstyled" target="_blank">"Broken" Consumer Link</a></span></outline-core-link></p>

```html preview-story
<outline-core-link>
  <span>
    <a href="https://www.phase2technology.com" target="_blank">
      "Broken" Consumer Link
    </a>
  </span>
</outline-core-link>
```

In the above example, because we wrapped our `a` inside a `span` tag, the default styling provided by the component is visually broken. 

#### **Overriding a Consumer Link**

With the flexible implementation of `outline-core-link`, it is possible to override the `a` tag provided to the `slot` by passing attributes to the `outline-core-link` component itself.
What this means is that if you create an `a` tag, that includes a `target` attribute, but also add a `link-target` to your `outline-core-link` wrapper, the value from `outline-core-link` will override the value of the `target` attribute on the slotted `a` tag.

---

<p><outline-core-link link-target="_blank"><a href="https://www.phase2technology.com" className="sb-unstyled" target="_self">Overriding target attribute</a></outline-core-link></p>

```html preview-story
<outline-core-link link-target="_blank">
  <a 
    href="https://www.phase2technology.com"    
    target="_self"
  >
    Overriding target attribute
  </a>
</outline-core-link>
```

In the above example, the `target` was set originally by the consumer application as `_self`, however, we were able to override it by simply using the `link-target` attribute on the `outline-core-link` component.

---

<p><outline-core-link link-rel="noreferrer noopener alternate"><a href="https://www.phase2technology.com" className="sb-unstyled" rel="alternate" target="_blank">Overriding rel attribute</a></outline-core-link></p>

```html preview-story
<outline-core-link link-rel="noreferrer noopener alternate">
  <a 
    href="https://www.phase2technology.com"
    target="_blank"
    rel="alternate"
  >
    Overriding rel attribute
  </a>
</outline-core-link>
```

In the above example, the `target` was set originally by the consumer application as `_self`, however, we were able to override it by simply using the `link-target` attribute on the `outline-core-link` component.

---

### Component Links

Component Links are links that are created by the `outline-core-link` component itself, and part, if not all of the link is rendered in the Shadow DOM.
These links are created by setting the `link-href` property to a valid URL.

> *If you would like to put a full, pre-generated link in a slot, you should use **Consumer Link** method described above.* 

--- 

<p><outline-core-link link-href="https://www.phase2technology.com" link-target="_blank">Component link using default slot for link text</outline-core-link></p>

```html preview-story
<!-- This example shows the link text being provided via the default slot -->
<outline-core-link 
  link-href="https://www.phase2technology.com" 
  link-target="_blank"
>
  Component link using default slot for link text
</outline-core-link>
```

In the above example, the link itself is rendered in the Shadow DOM, and the link text is rendered in the Light DOM via the default slot.

--- 

<p><outline-core-link link-href="https://www.phase2technology.com" link-target="_blank" link-text="Component link using only properties"></outline-core-link></p>
```html preview-story
<!-- This example shows the link text being provided via the link-text property -->
<outline-core-link 
  link-href="https://www.phase2technology.com" 
  link-target="_blank" 
  link-text="Component link using only properties"
>
</outline-core-link>
```

In the above example, the link itself is rendered in the Shadow DOM, and the link text is rendered in the Shadow DOM as well because of the usage of the `link-text` property.

## When to use **`outline-core-link`** in **"Component Link"** mode

The `outline-core-link` component should be used in **Component Link** mode when you need to create a link that is not provided by a consumer application, and you need to create a link that is rendered in the Shadow DOM.

- When component encapsulation is of paramount importance.
- When you need to create a link that is not provided by a consumer application.
- When you need to create a link that is rendered in the Shadow DOM.
- When control over the markup, functionality, and styling of the link should be completely controlled by the design system, dissallowing any consumer application from modifying the link.

### Usage Details

- You must provide and set the `link-href` property to a valid URL.
- You can optionally set the `link-target` property to a valid target value.
- You can optionally set the `link-text` property to a valid text value.
- You can optionally set the `link-rel` property to a valid rel value.
- If the link is external, the component will automatically add `rel="noopener noreferrer"` to the link and open the link in a new tab. 


## When to use **`outline-core-link`** in **"Consumer Link"** mode

The `outline-core-link` component should be used in **Consumer Link** mode when you need to create a link that is provided by a consumer application, and you need to create a link that is rendered in the Light DOM.
- When the ability for a consumer application to be able to manipulate the link is of paramount importance.
  - This can be when certain tools a client may use or require aren't able to penetrate the Shadow DOM.
- When you want to allow a consumer application the future ability to modify the content and possibly some functionality of the link without requiring changes to the deisgn system.

> **Common Scenario:** 
> 
> Drupal project has the ability to provide `content.field_link` or similar through a field level template. 
> Drupal provides the ability to extend this link with additional attributes like `rel`, `target`, etc. through core and contributed modules
> This allows for flexibilty for the CMS to decide what is being sent to the design system, and allows the design system to focus on styling, fail-safes and final functionality enhancements.

### Usage Details

- You must provide a valid `a` tag to the default slot.
  - The `a` tag provided must NOT be wrapped by ANY other markup.
    - The component will throw an error in the console.
    - The component styling will likely be broken.
- Assuming your `a` tag includes attributes already like `rel`, `target`, etc, you do not need to set any additional properties on the `outline-core-link` component.
  - You can optionally set the `link-target` property to a valid target value on `outline-core-link`, and it will be added to the `a` supplied via the slot.
    - If the link already had a `target` attribute, the value from `link-target` would overwrite it.
  - You can optionally set the `link-rel` property to a valid rel value.
    - If the link already had a `rel` attribute, the value from `link-rel` would be appended to it.
- If the link is external, the component will automatically add `rel="noopener noreferrer"` to the link and open the link in a new tab.

## CSS Variables

The primary styling of the `outline-core-link` component is handled by the following CSS Variables.

> Any consumer application can simply overwrite any relevant CSS Variables in a subsequent CSS include to affect change on the element styling using the following variables.

Additional documentation and references for these CSS Variables can be found in `outline-core-link/css-variables/vars-link.css`.

- `--outline-core-link-transition-property`: The CSS transition property to use for the link.
- `--outline-core-link-transition-duration`: The CSS transition duration to use for the link.
- `--outline-core-link-transition-timing-function`: The CSS transition timing function to use for the link.
- `--outline-core-link-color-default`: The default link color.
- `--outline-core-link-color-default-decoration`: Text decoration for the default link.
- `--outline-core-link-color-hover`: The link color when hovering on the link.
- `--outline-core-link-color-hover-decoration`: Text decoration for the link when hovering.
- `--outline-core-link-color-focus`: The link color when focusing on the link.
- `--outline-core-link-color-focus-decoration`: Text decoration for the link when focusing.
