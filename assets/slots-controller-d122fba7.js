import{o as u}from"./class-map-aeb7fbb6.js";import{l as d}from"./if-defined-93280f6e.js";import{o as c,n as a}from"./static-0503aeb3.js";class p{constructor(t){this._mutationObserver=new MutationObserver(this._handleMutation.bind(this)),this.host=t,t.addController(this)}hostConnected(){}_handleMutation(){this._mutationObserver.disconnect(),this.host.requestUpdate()}getSlottedNodes(t=null){const o=t===""||t===null;let e=[];return o?e=Array.from(this.host.childNodes).filter(n=>this.isDefaultSlotText(n)||this.isDefaultSlotElement(n)):e=Array.from(this.host.querySelectorAll(`[slot=${t}]`)),e.length?e:!1}exist(t=null){return!!this.getSlottedNodes(t)}isDefaultSlotText(t){return t.nodeType===t.TEXT_NODE&&t.textContent.trim()!==""}isDefaultSlotElement(t){return t.nodeType===t.ELEMENT_NODE&&t.getAttribute("slot")===null}addAnnotations(t,o){var r;const e=o.cloneNode(!0),n="slotsController cloned this "+(t===""?"default-slot":`named-slot '${t}'`)+" into the shadow DOM";if(Array.from(this.host.childNodes).some(s=>s.nodeValue===n)||o.before(document.createComment(n)),t!=="")return e.setAttribute("cloned-slot-type","named-slot"),e.setAttribute("cloned-slot-name",t),e.removeAttribute("slot"),e;if(this.isDefaultSlotElement(o))return e.setAttribute("cloned-slot-type","default-slot--element"),e.setAttribute("cloned-slot-name","default"),e.removeAttribute("slot"),e;{const s=document.createElement("cloned-slot");return(r=e.parentNode)==null||r.insertBefore(s,e),s.appendChild(e),s.setAttribute("cloned-slot-type","default-slot--text"),s.setAttribute("cloned-slot-name","default"),s}}dispatchEventsToLightDom(t,o){t.forEach(e=>{o.addEventListener(e,n=>{if(n.target){const l=this.getElementPathInShadowDom(n),r=this.getElementPathInLightDom(l);r&&r.dispatchEvent(new Event(e)),setTimeout(()=>{const s=this.getElementPathInLightDom(l,!0);s&&s.focus()},0)}})})}renderInShadow(t="",o=[],e=!0){const n=this.getSlottedNodes(t);if(n){const l=n.map(r=>{const s=r;let i;return e?i=this.addAnnotations(t,s):i=s.cloneNode(!0),this.dispatchEventsToLightDom(o,i),i});return this._mutationObserver.observe(this.host,{subtree:!0,childList:!0,attributes:!0,characterData:!0}),l}return null}getElementPathInShadowDom(t){const o=t.composedPath(),e=[];let n=!1;for(let r=0;!n&&r<o.length;r++){const s=o[r];if(s.nodeName==="#document-fragment")n=!0;else{const i=this.getSelectorForSingleElement(s);i&&e.push(i)}}return e.reverse()}getSelectorForSingleElement(t){if(!t.parentElement)return null;const o=Array.from(t.classList).join("."),e=`${t.localName}${o!==""?"."+o:""}`,l=Array.from(t.parentElement.querySelectorAll(e)).indexOf(t);return{name:e,index:l}}getElementPathInLightDom(t,o=!1){let e=o?this.host.shadowRoot:this.host;if(!e)return null;for(let n=0;n<t.length;n++)e=e.querySelectorAll(t[n].name)[t[n].index];return e}printExtraAttributes(t){return c(t.map(o=>`${o.name}=${o.value}`).join(" "))}conditionalSlot(t,o=!0,e=null,n=[]){const l=t===""||t===null,r={"default-slot":l,[`${t}`]:!l,[`${e}`]:e??!1};return this.exist(t)?a` <div
        class="${d(u(r))}"
        ${this.printExtraAttributes(n)}
      >
        ${o?a`${this.renderInShadow(t)}`:a`<slot name=${t}></slot> `}
      </div>`:null}}export{p as S};
//# sourceMappingURL=slots-controller-d122fba7.js.map
